<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="semafloor-room-page-theme.html">

<!-- <link rel="import" href="../iron-icon/iron-icon.html"> -->
<!-- <link rel="import" href="../iron-list/iron-list.html"> -->
<link rel="import" href="../iron-pages/iron-pages.html">
<link rel="import" href="../iron-collapse/iron-collapse.html">

<link rel="import" href="../paper-card/paper-card.html">
<link rel="import" href="../paper-spinner/paper-spinner-lite.html">
<!-- <link rel="import" href="../paper-ripple/paper-ripple.html"> -->
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../paper-dialog/paper-dialog.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<!-- <link rel="import" href="../paper-checkbox/paper-checkbox.html"> -->
<!-- <link rel="import" href="../paper-progress/paper-progress.html"> -->

<link rel="import" href="../firebase-element/firebase-collection.html">

<link rel="import" href="../neon-animation/animations/cascaded-animation.html">
<link rel="import" href="../neon-animation/animations/slide-from-bottom-animation.html">
<link rel="import" href="../neon-animation/neon-shared-element-animatable-behavior.html">
<link rel="import" href="../neon-animation/neon-animation-runner-behavior.html">
<!-- <link rel="import" href="../jv-datepicker/datepicker-slide-from-bottom-animation.html">
<link rel="import" href="../jv-datepicker/datepicker-slide-from-top-animation.html"> -->

<!--
An element providing a solution to no problem in particular.

Example:

    <semafloor-room-page></semafloor-room-page>

@group Seed Elements
@element semafloor-room-page
@demo demo/index.html
@hero hero.svg
-->
<dom-module id="semafloor-room-page">

  <template strip-whitespace>
    <style include="semafloor-room-page-theme"></style>

    <firebase-collection id="infoList" location="[[url]]" on-firebase-value="_onFirebaseValue"></firebase-collection>

    <iron-pages id="pages" selected="[[_page]]" attr-for-selected="page">
      <paper-spinner-lite active="[[_isLoadingCard]]" page="loading"></paper-spinner-lite>

      <div class="" page="card">
        <template is="dom-repeat" items="[[_allSiteCards]]" index-as="index" strip-whitespace>
          <paper-card class="each-card">
            <div class="each-content">
              <div class="card-content">
                <iron-icon class$="[[_computeSiteIcon(index)]]" icon="icons:[[_computeSiteIcon(index)]]"></iron-icon>
                [[item]]
              </div>
              <div class="card-actions">
                <paper-button on-tap="_rollThumbnail">
                  roll
                </paper-button>
                <paper-button on-transitionend="_exploreSite">Explore</paper-button>
              </div>
            </div>
            <iron-image class$="card-img [[_computeSiteIcon(index)]]" alt="[[item]]" src="[[_computeSiteImage(imagesList)]]" sizing="cover" fade preload></iron-image>
          </paper-card>
        </template>
      </div>
    </iron-pages>

    <paper-dialog id="floorInfo"
      no-auto-focus
      entry-animation="slide-from-bottom-animation"
      exit-animation="slide-from-top-animation"
      on-iron-overlay-opened="_floorInfoDialogOpened"
      on-iron-overlay-closed="_resetDocumentScrolling">
      <div class$="info-card-toolbar [[_computeSiteIcon(_exploringSiteIdx)]]">
        <paper-icon-button icon="icons:[[_computeFloorInfoIcon(_floorInfoTitle)]]" on-tap="_floorInfoIconAction"></paper-icon-button>
        [[_floorInfoTitle]]
      </div>

      <div id="infoCardContainer" class="info-card-container">
        <template is="dom-repeat" items="[[_allFloorCards]]" index-as="index" strip-whitespace>
          <paper-card class$="each-card [[_isRoomCls(_isRoom)]]">
            <template is="dom-if" if="[[_isRoom]]" restamp="true">
              <iron-collapse id="infoCollapse" on-transitionend="_collapseOpened">
                Content goes here...
                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
              </iron-collapse>
            </template>

            <div class="each-content">
              <div class="card-content">
                <iron-icon class$="[[_computeSiteIcon(_exploringSiteIdx)]]" icon=""></iron-icon>
                <template is="dom-if" if="[[_isRoom]]" restamp="true" strip-whitespace>
                  [[item.name]]
                </template>
                <template is="dom-if" if="[[!_isRoom]]" restamp="true" strip-whitespace>
                  [[item]]
                </template>
              </div>
              <div class="card-actions">
                <paper-button on-tap="_exploreFloor" hidden$="[[_isRoom]]">Explore</paper-button>
                <paper-button hidden$="[[!_isRoom]]">Reserve</paper-button>
                <paper-icon-button icon="hardware:keyboard-arrow-down" hidden$="[[!_isRoom]]" on-tap="_exploreRoom"></paper-icon-button>
              </div>
            </div>
            <iron-image class$="card-img [[_computeSiteIcon(_exploringSiteIdx)]]" alt="[[item]]" src="" sizing="cover" fade preload></iron-image>
          </paper-card>
        </template>
      </div>
    </paper-dialog>

    <!-- <paper-dialog id="floorDialog" auto-fit-on-attach no-auto-focus>
      <div class$="fake-toolbar no-padding[[_computeInfoCls(_enteredSite)]]">
        <paper-icon-button icon="icons:arrow-back" on-tap="_leaveFloor"></paper-icon-button>
        [[_enteredSite]]
      </div>

      <paper-progress id="floorgress" indeterminate hidden$="[[_isDataReady]]"></paper-progress>
      <div class="fake-layout" hidden$="[[!_isDataReady]]">
        <iron-list id="floorsList" class="floor-list" items="[[_floorsAtEnteredSite]]">
          <template strip-whitespace>
            <div class="each-floor" on-tap="_enterRoom">
              [[item]]
            </div>
          </template>
        </iron-list>
      </div>
    </paper-dialog>

    <paper-dialog id="roomDialog" auto-fit-on-attach no-auto-focus>
      <div class$="fake-toolbar no-padding[[_computeInfoCls(_enteredSite)]]">
        <paper-icon-button icon="icons:arrow-back" on-tap="_leaveRoom"></paper-icon-button>
        [[_enteredSite]] [[_enteredFloor]]
      </div>

      <paper-progress id="roomgress" indeterminate hidden$="[[_isDataReady]]"></paper-progress>
      <div class="fake-layout" hidden$="[[!_isDataReady]]">
        <iron-list id="roomsList" class="floor-list" items="[[_roomsAtEnteredFloor]]">
          <template strip-whitespace>
            <div class="each-floor" on-tap="_enterInfo">
              [[item.name]]
            </div>
          </template>
        </iron-list>
      </div>
    </paper-dialog>

    <paper-dialog id="infoDialog" auto-fit-on-attach no-auto-focus with-backdrop>
      <template is="dom-repeat" items="[[_infoAtEnteredRoom]]" index-as="index" strip-whitespace>
        <h2 class$="[[_computeInfoCls(_enteredSite)]]">[[item.name]]</h2>
        <div class="each-info" on-tap="_enterInfo">
          Restricted
          <span>[[_isRestricted(item.access)]]</span>
        </div>
        <div class="each-info" on-tap="_enterInfo">
          Capacity
          <span>[[item.capacity]]</span>
        </div>
        <div class="each-info" on-tap="_enterInfo">
          Remarks
          <span>[[item.remarks]]</span>
        </div>
        <div class$="each-info[[_computeInfoCls(_enteredSite)]]" on-tap="_enterInfo">
          Types
          <template is="dom-repeat" items="[[_decodeTypes(item.types)]]" index-as="index" strip-whitespace>
            <paper-checkbox checked>[[item]]</paper-checkbox>
          </template>
        </div>
      </template>
    </paper-dialog> -->
  </template>

</dom-module>

<script src="semafloor-room-page.js"></script>
